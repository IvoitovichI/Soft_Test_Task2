pipeline {
    agent any

    stages {

        stage('Windows Chrome') {
            steps {
                bat """
                python -m robot ^
                    --variable OS:Windows ^
                    --variable OS_VERSION:11 ^
                    --variable BROWSER:chrome ^
                    tests
                """
            }
            post {
                always {
                    archiveArtifacts artifacts: 'output.xml'
                    archiveArtifacts artifacts: 'log.html'
                    archiveArtifacts artifacts: 'report.html'
                }
            }
        }

        stage('MacOS Chrome') {
            steps {
                bat """
                python -m robot ^
                    --variable OS:"OS X" ^
                    --variable OS_VERSION:Sonoma ^
                    --variable BROWSER:chrome ^
                    tests
                """
            }
            post {
                always {
                    archiveArtifacts artifacts: 'output.xml'
                    archiveArtifacts artifacts: 'log.html'
                    archiveArtifacts artifacts: 'report.html'
                }
            }
        }

        stage('Linux Firefox') {
            steps {
                bat """
                python -m robot ^
                    --variable OS:Linux ^
                    --variable OS_VERSION:latest ^
                    --variable BROWSER:firefox ^
                    tests
                """
            }
            post {
                always {
                    archiveArtifacts artifacts: 'output.xml'
                    archiveArtifacts artifacts: 'log.html'
                    archiveArtifacts artifacts: 'report.html'
                }
            }
        }
    }
}
